<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
	  xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:c="http://java.sun.com/jsp/jstl/core">
<h:head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>Menu</title>

	<meta name="viewport"
		content="width=device-width, initial-scale=1, user-scalable=no" />
	<link rel="stylesheet" href="css/baslao.css" />

</h:head>
<h:body style="background:#ffffff;margin: 0 0 0 0;">
	<ui:composition template="menuPrime.xhtml">
		<ui:define name="content">
			<h:form>

				<p:panel style="border: none;">
					<div style="margin-top: 50px; margin-left: 50px;">
						<p><span>Olá #{login.usuarioBean.nome}!</span></p>
					</div>
				</p:panel>

				<p:panel rendered="#{not empty dashboard.listaNotas}" style="border: none">
					<p><span>Encontramos essas notificações</span></p>

					<p:dataTable  var="nota" value="#{dashboard.listaNotas}" style="border: none" >
						<p:column>
							#{nota.usuarioResumidoBean.nome} - (#{nota.usuarioResumidoBean.descPerfil}) -
							<h:outputText value="#{nota.dataCadastro}" >
								<f:convertDateTime pattern="dd/MM/yyyy HH:mm:ss"/>
							</h:outputText>
							<h:outputText rendered="#{nota.notaMensagem != null and nota.notaMensagem.tipo == 1}"
										  title="Nova Mensagem" style="margin-left: 5px;" styleClass="pi pi-comment"/>
							<h:outputText rendered="#{nota.notaMensagem != null and nota.notaMensagem.tipo == 2}"
										  title="Novo Andamento" style="margin-left: 5px;" styleClass="pi pi-refresh"/>
							<h:outputText rendered="#{nota.notaDocumento != null}"
										  title="Novo Documento" style="margin-left: 5px;" styleClass="pi pi-file"/>

						</p:column>
						<p:column style="width:32px;text-align: center">
							<p:commandButton icon="pi pi-arrow-circle-right" ajax="false" action="#{chat.conversa}"
											 rendered="#{nota.notaMensagem != null and nota.notaMensagem.tipo == 1}"
											 style="background:#616161;border:none; text-align: center;">
								<f:setPropertyActionListener
										target="#{chat.idProcesso}" value="#{nota.idProcesso}" />
							</p:commandButton>

							<p:commandButton icon="pi pi-arrow-circle-right" ajax="false" action="#{consultarProcesso.detalhar}"
											 rendered="#{(nota.notaMensagem != null and nota.notaMensagem.tipo == 2)
											 				or nota.notaDocumento != null}"
											 style="background:#616161;border:none; text-align: center;">
								<f:setPropertyActionListener
										target="#{consultarProcesso.idProcesso}" value="#{nota.idProcesso}" />
							</p:commandButton>

						</p:column>
					</p:dataTable>
				</p:panel>

				<p:panel rendered="#{not empty dashboard.listaProcessos}" style="border: none">
					<p><span>Encontramos esses processos</span></p>

					<p:dataTable  var="processo" value="#{dashboard.listaProcessos}" style="border: none" >
						<p:column>
							Nº #{processo.numero} - Atualiz. <h:outputText value="#{processo.dataInicio}" >
																	<f:convertDateTime pattern="dd/MM/yyyy HH:mm:ss"/>
															 </h:outputText>
						</p:column>
						<p:column style="width:32px;text-align: center">
							<p:commandButton icon="pi pi-arrow-circle-right" ajax="false"
                                             style="background:#616161;border:none; text-align: center;"
											 action="#{consultarProcesso.detalhar}">
								<f:setPropertyActionListener
										target="#{consultarProcesso.processoBean}" value="#{processo}" />
							</p:commandButton>
						</p:column>
					</p:dataTable>
				</p:panel>


			</h:form>
		</ui:define>
	</ui:composition>
</h:body>
</html>